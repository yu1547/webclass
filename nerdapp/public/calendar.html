<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Planner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        #ToDoList {
            list-style: none;
            padding: 0;
        }

        .schedule-item {
            font-family:'Courier New', Courier, monospace;
            margin-bottom: 10px;
            padding: 10px 20px 10px 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }

        .checkbox-label {
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>Schedule Planner</h1>

    <ul id="ToDoList">

    </ul>

    <script>
        const tests = [
        	{
            	name: "期末考",
            	date: new Date("2023-12-31"),
            	importance: 6,
            	subject: [
                	{ name: "數學", clock: 4, finish: 0 },
                	{ name: "物理", clock: 3, finish: 0 }
            	],
            	finish: 0,
            	total: 0
        	},
        	{
            	name: "微積分",
            	date: new Date("2023-1-31"),
            	importance: 2,
            	subject: [
                	{ name: "微積分", clock:13, finish: 0 },
            	],
            	finish: 0,
            	total: 0
        	}
    	];


        let resultList = [];

        // 計算權重的函數（示例，你需要根據實際情況調整）
        function calculateWeight(exam, currentDate) {
            const daysDifference = Math.ceil((exam.date - currentDate) / (1000 * 60 * 60 * 24));
            return exam.importance / daysDifference;
        }

        // 查找可用時間的函數（示例，你需要根據實際情況調整）
        function findAvailableTime(currentDate) {
            // 返回一個假定的可用時間（分鐘）
            return 60;
        }

        // 找到最佳科目的函數（示例，你需要根據實際情況調整）
        function findBestSubject(tests) {
            return tests[0]; // 這裡假定第一個科目是最佳的
        }

        const ToDoListElement = document.getElementById("ToDoList");

        const currentDate = new Date();
        const tomorrow = new Date(currentDate);
        tomorrow.setDate(currentDate.getDate() + 1);

        while (tests.length > 0) {
            let availableTime = findAvailableTime(tomorrow);

            if (availableTime >= 25) {
                const selectedItem = findBestSubject(tests);
                const todoItem = {
                    name: selectedItem.name,
                    date: tomorrow,
                    importance: selectedItem.importance,
                    subject: selectedItem.subject[0].name,
                    clock: selectedItem.subject[0].clock,
                    finish: 0,
                    weight: calculateWeight(selectedItem, currentDate)
                };

                selectedItem.subject[0].clock -= 1;
                if (selectedItem.subject[0].clock === 0) {
                    tests.splice(tests.indexOf(selectedItem), 1);
                }

                availableTime -= 25;

                resultList.push(todoItem);
            }

            tomorrow.setDate(tomorrow.getDate() + 1);
        }

        // 過濾時間早於考試日期的科目
        resultList = resultList.filter(item => item.date >= currentDate);


        resultList.forEach(item => {
            const listItem = document.createElement("li");
            listItem.className = "schedule-item";
            listItem.innerHTML = `
                <strong>${item.name}</strong><br>
                Date: ${item.date.toLocaleDateString()}<br>
                Time: ${item.date.getHours()}:${item.date.getMinutes()}<br>
                Subject: ${item.subject} (${item.clock} mins)<br>
                <label class="checkbox-label">
                    <input type="checkbox"> Finish
                </label>
                <br>
            `;
            ToDoListElement.appendChild(listItem);
        });
    </script>
</body>
</html>
